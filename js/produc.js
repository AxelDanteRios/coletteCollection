let productosColette = [
    {
        id : 1,
        productoNombre : "Vulck activist BIO-01",
        precio : 76800,
        img : '../img/collection1.jpg',
    },
    {
        id : 2,
        productoNombre : "Vulck activist BIO-02",
        precio : 65000,
        img : '../img/collection2.jpg',
    },
    {
        id : 3,
        productoNombre : "Vulck activist BIO-03",
        precio : 80000,
        img : '../img/collection3.jpg',
    },
    {
        id : 4,
        productoNombre : "Vulck instant 01",
        precio : 70500,
        img : '../img/collection4.jpg',
    },
    {
        id : 5,
        productoNombre : "Vulck instant 02",
        precio : 68700,
        img : '../img/collection5.jpg',
    },
    {
        id : 6,
        productoNombre : "Vulck instant 03",
        precio : 77000,
        img : '../img/collection6.jpg',
    },
    {
        id : 7,
        productoNombre : "Vulck instant 04",
        precio : 79000,
        img : '../img/collection7.jpg',
    },
    {
        id : 8,
        productoNombre : "Rusty CRE-02",
        precio : 74500,
        img : '../img/collection8.jpg',
    },
    {
        id : 9,
        productoNombre : "Rusty CRE-03",
        precio : 50500,
        img : '../img/collection9.jpg',
    },
    {
        id : 10,
        productoNombre : "Rusty CRE-04",
        precio : 90000,
        img : '../img/collection10.jpg',
    },
    {
        id : 11,
        productoNombre : "Rusty CRE-05",
        precio : 60000,
        img : '../img/collection11.jpg',
    },
    {
        id : 12,
        productoNombre : "Rusty CRE-06",
        precio : 70800,
        img : '../img/collection12.jpg',
    },
    {
        id : 13,
        productoNombre : "Wink LAJOLLA 12",
        precio : 68000,
        img : '../img/collection13.jpg',
    },
    {
        id : 14,
        productoNombre : "Wink LAJOLLA 13",
        precio : 69500,
        img : '../img/collection14.jpg',
    },
    {
        id : 15,
        productoNombre : "Wink LAJOLLA 14",
        precio : 70600,
        img : '../img/collection15.jpg',
    },
    {
        id : 16,
        productoNombre : "Wink MAX 01",
        precio : 67000,
        img : '../img/collection16.jpg',
    },
    {
        id : 17,
        productoNombre : "Wink MAX 02",
        precio : 78000,
        img : '../img/collection17.jpg',
    },
    {
        id : 18,
        productoNombre : "Wink MAX 03",
        precio : 77000,
        img : '../img/collection18.jpg',
    },
    {
        id : 19,
        productoNombre : "Wink MAX 04",
        precio : 72000,
        img : '../img/collection19.jpg',
    },
    {
        id : 20,
        productoNombre : "Wink MAX 05",
        precio : 77500,
        img : '../img/collection20.jpg',
    },
    {
        id : 21,
        productoNombre : "RAYBAN BRO 01",
        precio : 65500,
        img : '../img/collection21.jpg',
    },
    {
        id : 22,
        productoNombre : "RAYBAN BRO 02",
        precio : 71600,
        img : '../img/collection22.jpg',
    },
    {
        id : 23,
        productoNombre : "RAYBAN BRO 03",
        precio : 74000,
        img : '../img/collection23.jpg',
    },
    {
        id : 24,
        productoNombre : "RAYBAN BRO 04",
        precio : 74400,
        img : '../img/collection24.jpg',
    },
    {
        id : 25,
        productoNombre : "RAYBAN BRO 05",
        precio : 74300,
        img : '../img/collection25.jpg',
    },
    {
        id : 26,
        productoNombre : "MISK DOM 01",
        precio : 65500,
        img : '../img/collection26.jpg',
    },
    {
        id : 27,
        productoNombre : "MISK DOM 02",
        precio : 71500,
        img : '../img/collection27.jpg',
    },
    {
        id : 28,
        productoNombre : "MISK DOM 03",
        precio : 79600,
        img : '../img/collection28.jpg',
    },
    {
        id : 29,
        productoNombre : "MISK DOM 04",
        precio : 74400,
        img : '../img/collection29.jpg',
    },
    {
        id : 30,
        productoNombre : "MISK DOM 05",
        precio : 69300,
        img : '../img/collection30.jpg',
    },
    {
        id : 31,
        productoNombre : "STK 114",
        precio : 70300,
        img : '../img/collection31.jpg',
    },
    {
        id : 32,
        productoNombre : "STK 115",
        precio : 66300,
        img : '../img/collection32.jpg',
    },
    {
        id : 33,
        productoNombre : "STK 116",
        precio : 74500,
        img : '../img/collection33.jpg',
    },
    {
        id : 34,
        productoNombre : "STK 117",
        precio : 71200,
        img : '../img/collection34.jpg',
    },
    {
        id : 35,
        productoNombre : "STK 118",
        precio : 82200,
        img : '../img/collection35.jpg',
    },
    {
        id : 36,
        productoNombre : "V V RAM 01",
        precio : 71200,
        img : '../img/collection36.jpg',
    },
    {
        id : 37,
        productoNombre : "V V RAM 02",
        precio : 73900,
        img : '../img/collection37.jpg',
    },
    {
        id : 38,
        productoNombre : "V V RAM 03",
        precio : 74400,
        img : '../img/collection38.jpg',
    },
    {
        id : 39,
        productoNombre : "V V RAM 04",
        precio : 70000,
        img : '../img/collection39.jpg',
    },
    {
        id : 40,
        productoNombre : "V V RAM 05",
        precio : 80800,
        img : '../img/collection40.jpg',
    },
    {
        id : 41,
        productoNombre : "V V RAM 06",
        precio : 70600,
        img : '../img/collection41.jpg',
    },
    {
        id : 42,
        productoNombre : "V V RAM 07",
        precio : 70000,
        img : '../img/collection42.jpg',
    },
]


let carritoDeCompras = []

const contenedor = document.getElementById('contenedorPaginacion');
const paginaActualElemento = document.getElementById('paginaActual');
const btnAnterior = document.getElementById('anterior');
const btnSiguiente = document.getElementById('siguiente');

let shopContenido = document.querySelector("#shopContenido");
let buscador = document.querySelector("#buscador");
let busca = document.querySelector(".form");
let noResultado = document.querySelector("#noResultados");
const elementosPorPagina = 14;
let paginaActual = 1;
let carritoImg = document.querySelector(".carritoDibujo")
const ventanaContainer = document.querySelector(".ventanaDelCarrit")


function formatPrice(price) {
    return price.toLocaleString('es-ES');
}




document.addEventListener('DOMContentLoaded', () => {

const urlParams = new URLSearchParams(window.location.search);
const productId = urlParams.get('id');

const producto = productosColette.find(p => p.id === Number (productId));

if (producto) {
    document.querySelector('.tituloProducto').textContent = producto.productoNombre;
    document.querySelector('.precioProducto').textContent = "$" + formatPrice(producto.precio);
    document.querySelector('.imagenProducto').src = producto.img;
}

});


let displayproducto = (prodList, pagina) => {
    const inicio = (pagina - 1) * elementosPorPagina;
    const fin = Math.min(inicio + elementosPorPagina, productosColette.length);



    shopContenido.innerHTML = "";

    if(prodList.length === 0){
        noResultado.style.display = "block";
    }
    else{
    prodList.slice(inicio, fin).forEach((producto)=> {
        let contenido = document.createElement("div")
        contenido.innerHTML = `
        <img src= "${producto.img}" data-id="${producto.id}" class="was">
        <h3 class="desc">${producto.productoNombre}</h3>
        <p class="prec">$${formatPrice(producto.precio)}</p>
        <img src= "../img/plus-small_4338829.png" data-id="${producto.id}" class="suma">
        `;
        shopContenido.append(contenido);
        


    });
    noResultado.style.display = "none";
    }
    paginaActualElemento.textContent = `PÃ¡gina ${pagina}`;

    // Actualizar estado de los botones
    btnAnterior.disabled = pagina === 1;
    btnSiguiente.disabled = pagina * elementosPorPagina >= productosColette.length;
     if(paginaActual != 1){
    buscador.style.display = "none"
}   
else{
    buscador.style.display = "flex"
}
};


function siguientePagina() {
    if (paginaActual * elementosPorPagina < productosColette.length) {
      paginaActual++;
      displayproducto(productosColette, paginaActual);
    } 
};
function paginaAnterior() {
    if (paginaActual > 1) {
      paginaActual--;
      displayproducto(productosColette, paginaActual);
    } 
};
btnSiguiente.addEventListener('click', siguientePagina);
btnAnterior.addEventListener('click', paginaAnterior);





let search = () => {
    let searchTerm = buscador.value.toLowerCase();
    let filtrarProductos = productosColette.filter((producto)=> producto.productoNombre.toLowerCase().startsWith(searchTerm));
    displayproducto(filtrarProductos, paginaActual);
};

displayproducto(productosColette ,paginaActual);

buscador.addEventListener("input", search);

let imgUno = document.querySelector(".was")
let imgDos = document.querySelector(".suma")



shopContenido.addEventListener("click", e =>{
    const target = e.target;
     const productId = target.getAttribute('data-id');
    if ((target.tagName === 'IMG') && (target.className === 'suma')) {
        const producto = productosColette.find(p => p.id === Number (productId));
        if (producto) {
            carritoDeCompras.push({
                id: producto.id,
                img: producto.img,
                nombre: producto.productoNombre,
                precio: producto.precio
            });
    }
}
    else if ((target.tagName === 'IMG') && (target.className === 'was')){
            window.location.href = `../pages/compra.html?id=${productId}`;
        }
})



carritoImg.addEventListener("click", () =>{
    ventanaContainer.style.display = "flex";
    ventanaContainer.innerHTML = "";
    const ventanaHeader = document.createElement("div")
    ventanaHeader.className = "carritoHead"
    ventanaHeader.innerHTML = `
    <h1 class="ventanaHeader">Carrito</h1>
    `;
    ventanaContainer.append(ventanaHeader);
    const btnVentana = document.createElement("h1");
    btnVentana.innerText = "X";
    btnVentana.className = "botonVentana"

    btnVentana.addEventListener("click",() => {
        ventanaContainer.style.display = "none";
    })

    ventanaHeader.append(btnVentana);

    carritoDeCompras.forEach((producto) => {

    let carritoContent = document.createElement("div");
    carritoContent.className = "contenidoCarr"
    carritoContent.innerHTML = `
        <img src= "${producto.img}" data-id="${producto.id}" class="was">
        <h3 class="desc">${producto.nombre}</h3>
        <p class="prec">$${formatPrice(producto.precio)}</p>
    `;
    console.log(carritoDeCompras)
        ventanaContainer.append(carritoContent)
    });
let total = carritoDeCompras.reduce((acc, el) => acc + el.precio, 0);
let totalPagar = document.createElement("div")
totalPagar.className = "totalContenido"
totalPagar.innerHTML =`Total a pagar: $${formatPrice(total)}`
ventanaContainer.append(totalPagar)
});








